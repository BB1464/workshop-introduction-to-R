---
title: "Training on Statistics and Data Analysis using R"
author: "Oluwafemi Oyedele"
subtitle: "Post Graduate Students, CPEB Club, \nUniversity of Ibadan"
date: "2023-08-19"
footer:  "[Statistics and Data Analysis using R](https://github.com/BB1464/workshop-introduction-to-R)"
logo: "img/ui.jpg"
header-logo: "img/rlogo.png"
filters:
  - reveal-header
  - quarto
auto-stretch: false
#css: logo.css
format: 
   revealjs: 
    theme: [solarized, slides.scss]
    highlight-style: a11y
    transition: fade
    slide-number: true
    show-slide-number: all
    chalkboard: true
    code-annotations: hover
    #multiplex: true
    #slide-tone: false
    #auto-slide: 2000
    #loop: true
    #footer: https://bb1464.github.io/workshop-introduction-to-R/
editor: visual
execute:
  freeze: auto
---

**About me**

::: incremental
::: columns
::: {.column width="60%"}
-   I am an Agrometeorologist and Processed-Based Modeller

-   I am a mentor in the R4DS online learning community

-   I am also a active member of the TidyTuesday project

-   `r fontawesome::fa("linkedin")`: [Oluwafemi Oyedele](https://www.linkedin.com/in/oluwafemioyedele)

-   `r fontawesome::fa("twitter")`: [\@OluwafemOyedele](https://twitter.com/OluwafemOyedele) `r emoji::emoji("thumbsup")`

-   `r fontawesome::fa("github")` [github.com/BB1464](https://github.com/BB1464/workshop-introduction-to-R)

-   `r fontawesome::fa("globe")` [bb1464.github.io](https://bb1464.github.io/oluwafemi-oyedele/)
:::

::: {.column width="40%"}
![](img/pix.jpg){style="float:right;padding: 0 0 0 10px;" fig-alt="Headshot of Dr. Maria Tackett" width="300"}
:::
:::
:::

::: notes
-   I am an Agrometeorologist with a bit of background in Crop modelling
:::

```{r}
library(fontawesome)
library(emoji)
```

## My R journey (so far)

```{r,fig.align='center',out.height='450px',out.width='500px'}
knitr::include_graphics(path = here::here('img/RlearningPath.PNG'))
```

## Learning Objectives

::: incremental
-   Installation of R and R Studio

-   Introduction to R and R Studio.

-   Data Import and Export

-   Data summary (Simple Descriptive analysis)

-   Data wrangling

-   Design of Experiment (CRD, RCBD, Latin Square Design, Split Plot Design and Alpha Latice Design).

-   Linear regression

-   Correlation
:::

## Learning Objectives Continued

::: incremental
-   Cluster analysis

-   PCA

-   Data Visualization

-   Communication (Report)
:::

## Installation

![](img/installation.png)

## **Install R and R Studio**

::: columns
::: {.column width="35%"}
-   The first thing you need to do is download the R and R Studio software. Go to the [(https://posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/) and download the software for your operating system (Windows, Mac, or Linux).
:::

::: {.column width="65%"}
![](img/install_R.png){style="float:right;padding: 0 0 0 5px;" fig-alt="Headshot of Dr. Maria Tackett" width="370"}
:::
:::

## **What is R**

::: columns
::: {.column width="40%"}
![](img/rlogo.png){style="float:right;padding: 0 0 0 10px;" fig-alt="Headshot of Dr. Maria Tackett" width="500"}
:::

::: {.column width="60%"}
::: incremental
-   A widely used programming language for data analysis

-   Based on statistical programming language S (1976)

-   Developed by Ross Ihaka & Robert Gentleman (1995)

-   Very active community, with many packages

-   Open source, and interoperable!
:::
:::
:::

## **If one already knows Stata or similar software, why use R?**

::: incremental
-   R is *free*, so you don't need a terminal server

-   R has a *very* large community.

-   R can handle virtually any data format.

-   R makes replication easy.
:::

## **What is R Studio**

::: columns
::: {.column width="40%"}
![](img/RStudio-Logo.png){style="float:right;padding: 0 0 0 10px;" fig-alt="Headshot of Dr. Maria Tackett" width="500"}
:::

::: {.column width="60%"}
::: incremental
-   Integrated Development Environment (IDE) for R that can make your life *easier*.

-   Founded by J.J. Allaire, available since 2010

-   Bloody useful! Let's take a look: please open RStudio!
:::
:::
:::

## **RStudio can:**

::: incremental
-   organize your code, output, and plots.

-   Auto-complete code and highlight syntax.

-   Help view data and objects.

-   Enable easy integration of R code into documents.
:::

## Open R Studio

- We should see something like this

![](https://moderndive.netlify.app/images/rstudio_screenshots/rstudio.png){fig-align="center" width="600"}

## R Studio Interface

::: {layout="[[-1], [1], [-1]]"}
![](img/rstudio-incremental.png){fig-align="center" width="700"}
:::

## **Demonstration**

::: incremental
-   Demontration on the various tabs found in R and R Studio.
:::

## **Working Directly in R**
:::{.incremental}
1.  Enter: 2 + 2

2.  Hit return

3.  View result
:::

## Your Turn

::: incremental
-   Open R

-   Use any mathematical operators (+, -, /, and *) to create an expression and make sure it works as expected
:::

## **R Studio Projects**

::: incremental
-   RStudio projects allow you to keep a collection of files all together, including:

-   R scripts

-   Quarto and Rmarkdown files (more on those soon)

-   Data files

-   And much more!
:::

## **How to Create a Project**

:::{.incremental}
-   File -\> New Project

-   Give the project a unique name

-   Set the directory where you want to put the project.

-   Quit RStudio, Double-click .Rproj file to reopen project
:::

## **Your Turn**

::: incremental
1.  Create a new project (doesn't matter if it's in a new or existing directory

2.  Quit RStudio, double-click the .Rproj file and reopen your project
:::

## **Download Training Project**

::: incremental
-   Enter the following into the RStudio console pane:
:::

```{r}
#| eval: false
#| echo: true
#| code-line-numbers: "1|2|3"
install.packages("usethis")
library(usethis) # This line loads the usethis package into R memory
use_course("https://github.com/BB1464/workshop-introduction-to-R.git") # this line will pull all the source code from my github repo into your system.

```

::: incremental
-   You'll now have a copy of the project created for this training that we'll use from here on out
:::

## File Types in R

There are **two main file types** that you'll work with:

::: incremental
::: columns
::: {.column width="50%"}
-   **R scripts (.R)**

-   Text is assumed to be executable R code unless you comment it

-   **Quarto files (.qmd)**

-   Text is assumed to be text unless you put it in a code chunk (more on this soon)
:::

::: {.column width="50%"}
![](img/code-chunk.png){style="float:right;padding: 0 0 0 10px;" fig-alt="Headshot of Dr. Maria Tackett" width="400"}
:::
:::
:::

## **R Scripts**

::: incremental
-   Create new script file: File -\> New File -\> R Script
:::

![](img/new-script.gif){style="float:right;padding: 0 0 0 10px;" fig-alt="Oluwafemi" width="700"}

## **How to Run Code**

::: incremental
-   Run the code: control + enter on Windows, command + enter on Mac keystrokes or use Run button
:::
![](img/run-code.gif){width="53%"}

## **How to Run Code Continuation**

::: incremental
-   Note that you don't have to highlight code.

-   You can just hit run anywhere on line to run code.
:::

## **Comments**

-   Do them for others, and for your future self.

```{r}
#| echo: true
#| eval: false

# This is a comment

head(data, n = 5)

```

## **Packages**

::: incremental
::: columns
::: {.column width="60%"}
-   Packages add functionality that is not present in base R.

-   They're where much of the power of R is found.
:::

::: {.column width="40%"}
![](img/phone-apps.png){style="float:right;padding: 0 0 0 10px;" width="300"}
:::
:::
:::

## **Packages We'll Use**

::: columns
::: {.column width="40%"}
![](img/tidyverse.png)
:::

::: {.column width="60%"}
### `tidyverse`

::: incremental
-   The [`tidyverse`](https://tidyverse.org/) is a collection of packages.

-   We'll use [`readr`](https://readr.tidyverse.org/) to import data.
:::
:::
:::

## **Packages We'll Use**

::: columns
::: {.column width="40%"}
![](img/skimr.png)
:::

::: {.column width="60%"}
### `skimr`

::: incremental
-   [`skimr`](https://github.com/ropensci/skimr) provides easy summary statistics.
:::
:::
:::

## **Install Packages**

-   The syntax to install packages is as follows.

```{r}
#| eval: false
#| echo: true
#| code-line-numbers: "1|2"
install.packages("tidyverse")
install.packages("skimr")

```
:::{.incremental}
-   The package name must be in quotes.

-   Packages should be installed **once per computer** (i.e. once you've installed a package, you don't need to do it again on the same computer).
:::

## **Load Packages**

-   To load packages, use the following syntax:

```{r}
#| eval: true
#| echo: true


library(tidyverse)
library(skimr)

```

:::{.incremental}
-   Package names don't need to be quoted here (though they can be).

-   Packages should be loaded **once per session** (i.e. every time you start working in R, you need to load any packages you want to use).
:::

## **Your Turn**

-   Open the project you downloaded before (it should be on your desktop)

-   Open the readme.md file

-   Install all the packages

-   Load the **tidyverse** and **skimr** packages using the **library function**

## **Data Science Workflow in R by (Hadley Wickham)**

![](img/data-science-workflow.png)

## Data Import

```{r}
#| echo: true
#| code-line-numbers: "0|1|3|5|7"
#| eval: true


library(tidyverse) # data wrangling and cleaning

library(here)  # For Easy Navigation of file path

library(readxl) # To import excel file into R

library(skimr) # For summary statistics
```

::: incremental
-   To read in a csv file into R we will use `read_csv`

-   To read in an excel file into R we will use `read_excel`

-   To write a csv file to disc we will use `write_csv`

-   To write a excel file to disc we will use `write_xlsx` from `writexl package`
:::

## 

::: panel-tabset
## Data Import

```{r sorghum_dataset}
#| echo: true
#| code-line-numbers: "0|1"

sorghum<-read_csv(here::here('data/sorghum.csv')) 

# Congratulation you have successfully read a csv file into R and we assigned it to an object called sorghum
```

## Table

```{r table}
#| echo: true
#| code-line-numbers: "0|1|2|3|4"

sorghum %>% 
  head(2)
sorghum %>% 
  tail(2)
#- Import sorghum.xlsx into RStudio
```
:::

## Data Import Practicals

-   Import `sorghum.xlsx` into RStudio and assigned it to an object called `sorghnum_dat.`

-   View the first 6 rows of the dataset.

## **Data Types**

::: incremental
-   **Double/Numeric** (e.g. 2.5)

-   **Character** (e.g. "Male")

-   **Logical** (e.g. "TRUE and FALSE")
:::

## Data Wrangling

![](img/tidydata.png)


## **In tidy data:**

::: incremental
-   Each variable forms a column

-   Each observation forms a row
:::

## Summary Statistics of the dataset

::: panel-tabset
## Code

```{r}
#| echo: true
#| code-line-numbers: "1|2"
library(skimr)
output <- skim(iris)
```

## Result

```{r}
print(output)
# - I found this to be very useful when performing EDA but we will explore other options during data viz.
```
:::

## Data Transformation

::: incremental
-   There are five key dplyr functions in tidyverse to solve most of data manipulation challenges:

-   Pick observations by their values -- `filter()`

-   Reorder (sort) the rows -- `arrange()`

-   Pick variables by their names -- `select()`

-   Create new variables with functions of existing variables -- `mutate()`

-   Collapse many values down to a summary -- `summarize()`
:::

## Data Transformation: Filter

::: incremental
-   `filter()` allows to subset observations based on their values

-   `filter(data, expressions)`

-   The first argument is the name of the data frame The second and subsequent arguments are the expressions that filter the data frame
:::

## Data Transformation: Filter

::: panel-tabset
## Filter

```{r}
#| echo: true
#| code-line-numbers: "1|2|3"

sorghum <- read.csv(file = here::here('data/sorghum.csv'))

head(sorghum)

```

## Output

```{r}
#| echo: true
#| code-line-numbers: "1|2"

sorghum %>% 
  filter(env=='E1')

```
:::

## Data Transformation: Filter

-   What does the following command do?

```{r}
#| echo: true
#| code-line-numbers: "1|3"
sorghum <- read.csv(file = here::here('data/sorghum.csv'))

filter(sorghum, env %in% c('E1','E2'))
```

## Data Transformation: `Filter` Practical `5 minutes`

-   import `mtcars.csv` data into RStudio

-   `filter` for `mpg<20` and `gear==4`

## Data Transformation: Arrange

-   `arrange()` changes the order of the rows (sorting): it takes a data frame and a set of column names to order by

```{r}
#| echo: true
#| code-line-numbers: "1"
head(arrange(mtcars, mpg),10)
```

## Data Transformation: Arrange

We can use the function desc() to re-order by a column in descending order

```{r}
#| echo: true
#| code-line-numbers: "1"
arrange(mtcars, desc(mpg))

```

## Data Transformation: `Select`

-   Select help us to pick variable by their position or name in a `dataframe`.

-   We can also used other `select` helpers function like `start_with`, `end_with` and `everything`

```{r}
#| echo: true
#| code-line-numbers: "1|2"
mtcars_demo <- select(mtcars, mpg, cyl, disp)
mtcars_demo
```

## Data Transformation: `Mutate`

-   We can add new columns that are functions of existing columns with `mutate()` which always adds new columns at the end of the dataset

```{r}
mtcars %>% 
  mutate(mpg_trans=log10(mpg)) %>% 
  head(10)
```

## Data Transformation: `Summaries`

-   `summarize()` collapses a data frame to a single or few row(s)

```{r}
summarize(mtcars, mpg_mean = mean(mpg, na.rm = TRUE))
```

-   `summarize()` is useful with `group_by()`

```{r}
#| echo: true
#| code-line-numbers: "1|2"
by_treatment <- group_by(iris, Species)
summarise(by_treatment, Sepal.Length_mean = mean(Sepal.Length, na.rm = TRUE))
```

## Data Transformation: The pipe `%>%`

```{r}
#| echo: true
#| code-line-numbers: "1|2|3"
iris %>%
group_by(Species) %>%
summarise(mean_Sepal.Length = mean(Sepal.Length, na.rm = TRUE))
```

## Data Transformation: Count

```{r}
#| echo: true
#| code-line-numbers: "1|2|3"
iris %>%
group_by(Species) %>%
summarise(n = n())
```

## Data Wrangling: Practical

-   Import `sorghum.xlsx` to R and save to an object named example03

-   How many observations do we have per environment?

-   How many `environment?` `genotypes?` Display the list of locations and the list of `genotypes respectively?`

-   Display the data where the `yield was less than 150?`

-   Select `env`, `gen`, `yield`, to be saved in a new object `example03.short` and create a new variable `mean_yield` by by computing the mean of the `yield.`

## **Getting Help**

-   We can use the ? to get help about anything we are confused about in R.

```{r}
#| echo: true
#| eval: false
?read_csv

```

## Tidyverse Website

![](img/tidyverse-website.gif)(https://www.tidyverse.org/)

## Package Vignettes

![](img/skimr-vignette.gif) (https://cran.r-project.org/web/packages/skimr/vignettes/Using_skimr.html)

## Twitter

![](img/rstats-twitter.gif)(https://twitter.com/search?q=%23rstats)

## **R for Data Science Community**

```{r,fig.align='center',fig.height=20,fig.width=15}
knitr::include_graphics(path = here::here('img/r4ds-website.png'))
```

## Google

![](img/programming-google.png)(https://twitter.com/ekaleedmiston/status/1081221822186696706)

## 

## Resources to Learn More

[R4DS Book](https://r4ds.hadley.nz/)

[ModernDive](https://moderndive.netlify.app)

[BigBookofR](https://www.bigbookofr.com)

[ggplot2](https://ggplot2-book.org/index.html)

[RLadies Video Feed on YouTube](https://ivelasq.github.io/rladies-video-feed/)

## **QUESTIONS?**

::: incremental
::: columns
::: {.column width="60%"}
-   `r fontawesome::fa("linkedin")`: [Oluwafemi Oyedele](https://www.linkedin.com/in/oluwafemioyedele)

-   `r fontawesome::fa("twitter")`: [\@OluwafemOyedele](https://twitter.com/OluwafemOyedele) `r emoji::emoji("thumbsup")`

-   `r fontawesome::fa("github")` [github.com/BB1464](https://github.com/BB1464/workshop-introduction-to-R)

-   `r fontawesome::fa("globe")` [bb1464.github.io](https://bb1464.github.io/oluwafemi-oyedele/)

-   `r fontawesome::fa("briefcase")` [r4ds-slack-channel](http://r4ds.io/join)
:::

::: {.column width="40%"}
![](img/pix.jpg){style="float:right;padding: 0 0 0 10px;" fig-alt="Headshot of Dr. Maria Tackett" width="300"}
:::
:::
:::
